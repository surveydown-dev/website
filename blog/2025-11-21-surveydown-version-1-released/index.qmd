---
title: "Releasing surveydown v1.0.0: Auto page navigation, previous buttons, and more!"
author:
  - name: John Paul Helveston
  - name: Pingfan Hu
description: |
  We are thrilled to announce the `v1.0.0` release of `surveydown`, a stable release with improvements to YAML, navigation, question creation, and a smooth overall developer experience.
date: '2025-11-21'
image: "banner.png"
categories:
  - package
  - feature
---

## Installation

Firstly, to upgrade to the latest version of `surveydown`, run:

```{r}
# install.packages("pak")
pak::pak("surveydown-dev/surveydown")
```

It takes a couple of days to propagate to CRAN. Once it's available, you can install from CRAN as usual:

```{r}
install.packages("surveydown")
```

Now, let's proceed to the new features!

## YAML Header

YAML header is used in every `.qmd` file as metadata to define page behavior. `surveydown` relies on YAML header in `survey.qmd` as well.

**YAML omission:** There is **no** need to have these Quarto YAML settings anymore because thy are now auto-loaded as `surveydown` runs:

```yaml
---
format: html
echo: false
warning: false
---
```

**New YAML experience:** An empty YAML is fine if you want to use all default settings, so your `survey.qmd` file can start directly with your library calls and survey content:

````{r}
```{r}
library(surveydown)
library(other_packages)
```

Survey content...
````

**Advanced YAML settings:** Now let's say there are needs to customize your survey behavior, we've provided a new hierarchy for YAML settings. Below is a full list of all possible YAML settings with their default values. You can access them in your `_survey/settings.yml` file of any `surveydown` survey project.

```yaml
---
theme-settings:
  theme: default
  barposition: top
  footer-left: ''
  footer-center: ''
  footer-right: ''

survey-settings:
  show-previous: no
  use-cookies: no
  auto-scroll: no
  rate-survey: no
  all-questions-required: no
  start-page: your_first_page
  system-language: en
  highlight-unanswered: yes
  highlight-color: gray
  capture-metadata: yes
  required-questions: []

system-messages:
  cancel: Cancel
  confirm-exit: Confirm Exit
  sure-exit: Are you sure you want to exit the survey?
  submit-exit: Submit and Exit
  warning: Warning
  required: Please answer all required questions before proceeding.
  rating-title: Before you go...
  rating-text: 'Rate your survey experience:'
  rating-scale: from 1-poor to 5-excellent
  previous: Previous
  next: Next
  exit: Exit Survey
  close-tab: Please close this tab manually to exit the survey.
  choose-option: Choose an option...
  click: Click here
  redirect: Redirecting in
  seconds: seconds
  new-tab: Opens in a new tab
  redirect-error: "Error: This text won't trigger any redirection..."
---
```

You can customize any of them in `survey.qmd` to fit your survey needs. For example, say you want to **enable cookies**, you can have these YAML settings in your `survey.qmd` file:

```yaml
---
survey-settings:
  use-cookies: yes
---
```

## Previous Button Support

One of the most requested features is finally here: **previous buttons**! Survey respondents can now navigate backwards through your survey, and it's up to you, the survey designers, to enable this feature globally or on a per-page basis.

**Global setting:** Enable previous buttons globally by YAML header in `survey.qmd`:

```yaml
---
survey-settings:
  show-previous: true
---
```

**Page-Level override:** You can override the global setting on specific pages using `sd_nav()`:

```{r}
# Enable previous button on a page
sd_nav(show_previous = TRUE)

# Disable previous button on a page
sd_nav(show_previous = FALSE)
```

Here are examples of previous button being enabled and disabled:

<center>
<img src="images/previous_off.png" style="max-width: 700px; width: 100%;">
<p><em>Previous button disabled</em></p>
</center>
<br>

<center>
<img src="images/previous_on.png" style="max-width: 700px; width: 100%;">
<p><em>Previous button enabled</em></p>
</center>

## New Navigation

**Auto nav injection**: Here's the best part: no need to define navigation to every page. Navigation buttons are now auto injected at the end of each page unless you call `sd_nav()` or `sd_close()` on that page.

This means survey page definition can be as simple as:

```{r}
--- page_1

Page 1 content...

--- page_2

Page 2 content...

--- page_3

Page 3 content...
```

No navigation code needed - `surveydown` handles it for you.

::: {.callout-tip}
The auto nav injection is equivalent to having `sd_nav()` at the end of a page with a succeeding page. If manually call `sd_nav()` or `sd_close()`, the auto injection will be overridden.
:::

**Manual navigation control**: Use `sd_nav()` or `sd_close()` to customize navigation.

The new `sd_nav()` function replaces the old `sd_next()`, providing a unified interface for both previous and next buttons.

In most cases, calling `sd_nav()` with empty parameters will suffice, as it defaults to showing both buttons based on your global settings.

`sd_nav()` allows these parameters:

- `page_next`, defaults to the next page in order
- `label_previous`, defaults to the system message "Previous"
- `label_next`, defaults to the system message "Next"
- `show_previous`, defaults to the global setting
- `show_next`, defaults to `TRUE` 

Likewise, `sd_close()` supports both previous and next buttons:

- `label_close`, defaults to the system message "Close"
- `label_previous`, defaults to the system message "Previous"
- `show_previous`, defaults to the global setting

## `sd_question()` Enhancements

**Both `option` and `options` are supported:** Now `sd_question()` supports either `option` or `options` to define define options for multiple-choice typed questions, such as `mc`, `mc_buttons`, etc.

**Auto label to value conversion**: When defining `option` or `options`, the traditional way is to define `label = value` mapping, like this:

```{r}
sd_question(
  id = "favorite_color",
  type = "mc",
  label = "What's your favorite color?",
  options = c(
    "Light Blue" = "light_blue",
    "Dark Green" = "dark_green",
    "Bright Red" = "bright_red")
)
```

Now there is a simpler way! You can just omit the mapping:

```{r}
sd_question(
  id = "favorite_color",
  type = "mc",
  label = "What's your favorite color?",
  options = c(
    "Light Blue",
    "Dark Green",
    "Bright Red")
)
```

The auto label to value conversion creates snake case database values from display labels, so this automatically creates:

| Display Label | Database Value |
|--------------|----------------|
| Light Blue   | `light_blue`   |
| Dark Green   | `dark_green`   |
| Bright Red   | `bright_red`   |

## What's Next?

This `v1.0.0` release marks a major milestone for `surveydown`, but we're not stopping here. We have exciting features planned for future releases. Stay tuned!

As always, we welcome your feedback and contributions. If you encounter any issues or have suggestions, please [open an issue for the package](https://github.com/surveydown-dev/surveydown/issues), [create a discussion in our organization](https://github.com/orgs/surveydown-dev/discussions), or contribute directly via pull requests.

Happy surveying!
